"use strict";(self.webpackChunksoft_ui_dashboard_pro_react=self.webpackChunksoft_ui_dashboard_pro_react||[]).push([[912],{3912:(e,t,s)=>{s.r(t),s.d(t,{default:()=>k});var a=s(9950),r=s(4919),n=s(3274),l=s(1323),i=s(6186),o=s(4695),c=s.n(o),h=s(3474),d=s(5165),u=s(3464),x=s(9739),m=s(8170),j=s(33),y=s(899),f=(s(1171),s(5345)),g=s(982),p=(s(136),s(4414));function A(e){let{item:t,refetch:s}=e;const[o,A]=(0,a.useState)(!1),[k,b]=(0,a.useState)(t),[C,v]=(0,a.useState)({});(0,a.useEffect)((()=>{b({...k,edu_id:localStorage.getItem("userId")})}),[]);const w=()=>{A(!1)};return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(i.A,{variant:"body1",color:"secondary",sx:{cursor:"pointer",lineHeight:0},onClick:()=>{A(!0)},children:(0,p.jsx)(n.A,{title:"yangilash",placement:"top",children:(0,p.jsx)(r.A,{children:"edit"})})}),(0,p.jsxs)(u.A,{open:o,onClose:w,size:"xs",fullWidth:!0,children:[(0,p.jsx)(j.A,{children:"Malumotlarni yangilash"}),(0,p.jsx)(m.A,{children:(0,p.jsxs)(y.Ay,{container:!0,spacing:2,children:[(0,p.jsx)(y.Ay,{item:!0,xs:12,sm:6,children:(0,p.jsxs)(l.A,{children:[(0,p.jsxs)(i.A,{variant:"subtitle2",children:["Ism ",(0,p.jsx)("span",{style:{color:"#f009"},children:"*"})]}),(0,p.jsx)(f.A,{error:!!C.firstName,defaultValue:k.firstName,onChange:e=>b({...k,firstName:e.target.value}),type:"text"})]})}),(0,p.jsx)(y.Ay,{item:!0,xs:12,sm:6,children:(0,p.jsxs)(l.A,{children:[(0,p.jsxs)(i.A,{variant:"subtitle2",children:["Familya ",(0,p.jsx)("span",{style:{color:"#f009"},children:"*"})]}),(0,p.jsx)(f.A,{error:!!C.lastName,defaultValue:k.lastName,onChange:e=>b({...k,lastName:e.target.value}),type:"text"})]})}),(0,p.jsx)(y.Ay,{item:!0,xs:12,sm:6,children:(0,p.jsxs)(l.A,{children:[(0,p.jsxs)(i.A,{variant:"subtitle2",children:["jinsi ",(0,p.jsx)("span",{style:{color:"#f009"},children:"*"})]}),(0,p.jsx)(g.A,{error:!!C.gender,defaultValue:{label:"woman"==k.gender?"Ayol":"Erkak",value:k.gender},options:[{value:"male",label:"Erkak"},{value:"woman",label:"Ayol"}],onChange:e=>b({...k,gender:e.value})})]})}),(0,p.jsx)(y.Ay,{item:!0,xs:12,md:6,children:(0,p.jsxs)(l.A,{children:[(0,p.jsxs)(i.A,{variant:"subtitle2",children:["Tug\u2018ilgan kun ",(0,p.jsx)("span",{style:{color:"#f009"},children:"*"})]}),(0,p.jsx)(f.A,{error:!!C.birthday,defaultValue:k.birthday,onChange:e=>b({...k,birthday:e.target.value}),type:"text"})]})}),(0,p.jsx)(y.Ay,{item:!0,xs:12,md:6,children:(0,p.jsxs)(l.A,{children:[(0,p.jsxs)(i.A,{variant:"subtitle2",children:["Passport seriya ",(0,p.jsx)("span",{style:{color:"#f009"},children:"*"})]}),(0,p.jsx)(f.A,{error:!!C.passport,defaultValue:k.passport,onChange:e=>b({...k,passport:e.target.value}),type:"text"})]})}),(0,p.jsx)(y.Ay,{item:!0,xs:12,md:6,children:(0,p.jsxs)(l.A,{children:[(0,p.jsxs)(i.A,{variant:"subtitle2",children:["Uy Telefon raqami ",(0,p.jsx)("span",{style:{color:"#f009"},children:"*"})]}),(0,p.jsx)(f.A,{error:!!C.homephone,defaultValue:k.homephone,onChange:e=>b({...k,homephone:e.target.value}),type:"text"})]})})]})}),(0,p.jsxs)(x.A,{children:[(0,p.jsx)(d.A,{onClick:w,children:"Bekor qilish"}),(0,p.jsx)(d.A,{onClick:async()=>{if((()=>{let e={};return k.firstName||(e.name="Ism kerak"),k.lastName||(e.name="Familya kerak"),k.birthday||(e.birthday="Tug'ulgan kun kerak"),(!k.homephone||k.homephone.length<10)&&(e.homephone="Uy telefon raqami noto'g'ri"),k.gender||(e.gender="Jins tanlanishi kerak"),v(e),0===Object.keys(e).length})())try{const e=c().fire({title:"Yangilanmoqda...",text:"Biroz kuting!",allowOutsideClick:!1,allowEscapeKey:!1,showConfirmButton:!1,didOpen:()=>{c().showLoading()}}),t=await h.d0.update(k);e.close(),(e=>{e.ok?(c().fire("Yangilandi",e.message,"success").then((()=>s(e.data))),A(!1)):c().fire("Xatolik",e.error,"error")})(t)}catch(e){console.error("Error: ",e)}},children:"Yangilash"})]})]})]})}function k(e){let{item:t,refetch:s}=e;return(0,p.jsxs)(l.A,{display:"flex",alignItems:"center",children:[(0,p.jsx)(l.A,{mx:2,children:(0,p.jsx)(A,{item:t,refetch:s})}),(0,p.jsx)(i.A,{variant:"body1",onClick:()=>(async e=>{try{const t=c().mixin({customClass:{confirmButton:"button button-success",cancelButton:"button button-error"},buttonsStyling:!1});t.fire({title:"Chetlatish!",text:"Diqqat: ushbu xolatda talaba chetlatiladi va uni orqaga qaytarib bo'lmaydi!",showCancelButton:!0,confirmButtonText:"Chetlatish",cancelButtonText:"Bekor qilish",reverseButtons:!0}).then((async a=>{if(a.isConfirmed){const a=c().fire({title:"Chetlatilmoqda...",text:"Biroz kuting!",allowOutsideClick:!1,allowEscapeKey:!1,showConfirmButton:!1,didOpen:()=>{c().showLoading()}}),r=await h.d0.excluded(e);a.close(),r.ok?t.fire("Chetlatildi",r.message,"success").then((()=>{s(r.data)})):t.fire("Xatolik!",r.error,"error")}}))}catch(t){console.error(t.message)}})(t.id),color:"secondary",sx:{cursor:"pointer",lineHeight:0},children:(0,p.jsx)(n.A,{title:"chetlatish",placement:"top",children:(0,p.jsx)(r.A,{children:"delete"})})})]})}}}]);